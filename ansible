- name: Configure a RHEL based Intelligent IoT gateway
  hosts: gateways
  become: yes
  tasks:
  - name: Updgrade all packages
        yum: name=*
            state=latest

      - name: Install various pre-requisites
        yum: name=java-1.7.0-openjdk-devel,wget,unzip,git,docker docker-registry,device-mapper-libs,device-mapper-event-libs
            state=present
        become: yes
        become_method: sudo    

      - name: Download Maven
        get_url: url=http://mirror.olnevhost.net/pub/apache/maven/maven-3/3.3.9/binaries/apache-maven-3.3.9-bin.zip
        
      - name: Unzip Maven
        shell: unzip apache-maven-3.3.9-bin.zip
        
      - name: Move Maven
        shell: mv apache-maven-3.3.9/ /opt/
        become: yes
        become_method: sudo

      - name: Create link for maven
        shell: ln -s /opt/apache-maven-3.3.9/bin/mvn /usr/bin/mvn
        become: yes
        become_method: sudo
